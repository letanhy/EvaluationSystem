@model IEnumerable<StudentViewModel>
@using EvaluationSystem.Models;
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="container-xxl flex-grow-1 container-p-y">
    <!-- Basic Bootstrap Table -->
    <div class="card">
        <h5 class="card-header">Danh sách sinh viên</h5>
        <div style="margin-bottom: 20px; margin-left: 20px">
            <button type="button" class="btn btn-sm btn-primary"
                    onclick="OpenPopup('@Url.Action("Create", "Student", new{ IsPopup = true })', 'Thêm sinh viên','s', 500)">
                Thêm sinh viên
            </button>
            <button type="button" class="btn btn-sm btn-secondary">Secondary</button>
        </div>
        <div class="table-responsive text-nowrap">
            @Html.AjaxGrid(Url.Action("IndexGrid"))
        </div>
    </div>
</div>

@section ScriptBottom {
    <script type="text/javascript">
        $(document).ready(function () {
            new MvcGrid(document.querySelector('.mvc-grid'));
        });

        function ClosePopupAndReloadGrid() {
            ClosePopup();
            ReloadGrid();
        }

        function DeleteItem(Id) {
            if (confirm('Bạn có chắc muốn xóa sinh viên?')) {
                $.ajax({
                    url: '@Url.Action("Delete")',
                    type: "POST",
                    data: { Id: Id },
                    success: function (res) {
                        alert(res.message, res.type)
                        ReloadGrid();
                    }
                });
            }
        }

        function ReloadGrid() {
            var grid = new MvcGrid(document.querySelector('.mvc-grid'));
            grid.reload();
        }
    </script>
}

